(function(e){"use strict";e.fn.counterUp=function(t){var s,n=e.extend({time:400,delay:10,offset:100,beginAt:0,formatter:!1,context:"window",callback:function(){}},t);return this.each(function(){var t=e(this),o={time:e(this).data("counterup-time")||n.time,delay:e(this).data("counterup-delay")||n.delay,offset:e(this).data("counterup-offset")||n.offset,beginAt:e(this).data("counterup-beginat")||n.beginAt,context:e(this).data("counterup-context")||n.context},i=function(){if(h=[],r=o.time/o.delay,a=e(this).attr("data-num")?e(this).attr("data-num"):t.text(),f=/[0-9]+,[0-9]+/.test(a),a=a.replace(/,/g,""),v=(a.split(".")[1]||[]).length,o.beginAt>a&&(o.beginAt=a),m=/[0-9]+:[0-9]+:[0-9]+/.test(a),m){var i,a,r,c,l,d,u,h,m,f,v,b,g=a.split(":"),p=1;for(s=0;g.length>0;)s+=p*parseInt(g.pop(),10),p*=60}for(c=r;c>=o.beginAt/a*r;c--){if(i=parseFloat(a/r*c).toFixed(v),m&&(i=parseInt(s/r*c),u=parseInt(i/3600)%24,d=parseInt(i/60)%60,l=parseInt(i%60,10),i=(u<10?"0"+u:u)+":"+(d<10?"0"+d:d)+":"+(l<10?"0"+l:l)),f)for(;/(\d+)(\d{3})/.test(i.toString());)i=i.toString().replace(/(\d+)(\d{3})/,"$1,$2");n.formatter&&(i=n.formatter.call(this,i)),h.unshift(i)}t.data("counterup-nums",h),t.text(o.beginAt),b=function(){if(!t.data("counterup-nums")){n.callback.call(this);return}t.html(t.data("counterup-nums").shift()),t.data("counterup-nums").length?setTimeout(t.data("counterup-func"),o.delay):(t.data("counterup-nums",null),t.data("counterup-func",null),n.callback.call(this))},t.data("counterup-func",b),setTimeout(t.data("counterup-func"),o.delay)};t.waypoint(function(){i(),this.destroy()},{offset:o.offset+"%",context:o.context})})}})(jQuery)