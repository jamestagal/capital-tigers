(function(e){"use strict";Modernizr.addTest("csstransformspreserve3d",function(){var s,t=Modernizr.prefixed("transformStyle"),n="preserve-3d";return!!t&&(t=t.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-"),Modernizr.testStyles("#modernizr{"+t+":"+n+";}",function(n){s=e.getComputedStyle?getComputedStyle(n,null).getPropertyValue(t):""}),s===n)});function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var n={transitions:Modernizr.csstransitions,transforms3d:Modernizr.csstransforms3d&&Modernizr.csstransformspreserve3d},i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},s=i[Modernizr.prefixed("transition")];function t(e,t){this.button=e,this.options=o({},this.options),o(this.options,t),this._init()}t.prototype.options={statusTime:1500},t.prototype._init=function(){this._validate(),this._create(),this._initEvents()},t.prototype._validate=function(){this.button.getAttribute("data-style")===null&&this.button.setAttribute("data-style","fill"),this.button.getAttribute("data-vertical")===null&&this.button.getAttribute("data-horizontal")===null&&this.button.setAttribute("data-horizontal",""),!n.transforms3d&&this.button.getAttribute("data-perspective")!==null&&(this.button.removeAttribute("data-perspective"),this.button.setAttribute("data-style","fill"),this.button.removeAttribute("data-vertical"),this.button.setAttribute("data-horizontal",""))},t.prototype._create=function(){var e,t,s,n=document.createElement("span");n.className="content",n.innerHTML=this.button.innerHTML,e=document.createElement("span"),e.className="progress",s=document.createElement("span"),s.className="progress-inner",e.appendChild(s),this.button.innerHTML="",this.button.getAttribute("data-perspective")!==null?(t=document.createElement("span"),t.className="progress-wrap",t.appendChild(n),t.appendChild(e),this.button.appendChild(t)):(this.button.appendChild(n),this.button.appendChild(e)),this.progress=s,this.button.getAttribute("data-horizontal")!==null?this.progressProp="width":this.button.getAttribute("data-vertical")!==null&&(this.progressProp="height"),this._enable()},t.prototype._setProgress=function(e){this.progress.style[this.progressProp]=100*e+"%"},t.prototype._initEvents=function(){var e=this;this.button.addEventListener("click",function(){e.button.setAttribute("disabled",""),classie.remove(e.progress,"notransition"),classie.add(this,"state-loading"),setTimeout(function(){if(typeof e.options.callback=="function")e.options.callback(e);else{e._setProgress(1);var t=function(o){if(n.transitions&&o.propertyName!==e.progressProp)return;this.removeEventListener(s,t),e._stop()};n.transitions?e.progress.addEventListener(s,t):t.call()}},e.button.getAttribute("data-style")==="fill"||e.button.getAttribute("data-style")==="top-line"||e.button.getAttribute("data-style")==="lateral-lines"?0:200)})},t.prototype._stop=function(e){var t=this;setTimeout(function(){t.progress.style.opacity=0;var i,o=function(e){if(n.transitions&&e.propertyName!=="opacity")return;this.removeEventListener(s,o),classie.add(t.progress,"notransition"),t.progress.style[t.progressProp]="0%",t.progress.style.opacity=1};n.transitions?t.progress.addEventListener(s,o):o.call(),typeof e=="number"?(i=e>=0?"state-success":"state-error",classie.add(t.button,i),setTimeout(function(){classie.remove(t.button,i),t._enable()},t.options.statusTime)):t._enable(),classie.remove(t.button,"state-loading")},100)},t.prototype._enable=function(){this.button.removeAttribute("disabled")},e.ProgressButton=t})(window)