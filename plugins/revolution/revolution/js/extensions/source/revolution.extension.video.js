(function(){"use strict";var s,o,a,r,c,l,d,h,t=jQuery.fn.revolution,i=t.is_mobile(),u={alias:"Video Min JS",name:"revolution.extensions.video.min.js",min_core:"5.3",version:"2.0.1"};jQuery.extend(!0,t,{preLoadAudio:function(e,n){if(t.compare_version(u).check==="stop")return!1;e.find(".tp-audiolayer").each(function(){var s=jQuery(this),e={};s.find("audio").length===0&&(e.src=s.data("videomp4")!=void 0?s.data("videomp4"):"",e.pre=s.data("videopreload")||"",s.attr("id")===void 0&&s.attr("audio-layer-"+Math.round(Math.random()*199999)),e.id=s.attr("id"),e.status="prepared",e.start=jQuery.now(),e.waittime=s.data("videopreloadwait")*1e3||5e3,(e.pre=="auto"||e.pre=="canplaythrough"||e.pre=="canplay"||e.pre=="progress")&&(n.audioqueue===void 0&&(n.audioqueue=[]),n.audioqueue.push(e),t.manageVideoLayer(s,n)))})},preLoadAudioDone:function(e,t,n){t.audioqueue&&t.audioqueue.length>0&&jQuery.each(t.audioqueue,function(t,s){e.data("videomp4")===s.src&&(s.pre===n||s.pre==="auto")&&(s.status="loaded")})},resetVideo:function(e,s){switch(o=e.data(),o.videotype){case"youtube":h=o.player;try{if(o.forcerewind=="on"){var a=n(e.data("videostartat")),r=a==-1,c=o.bgvideo===1||e.find(".tp-videoposter").length>0,a=a==-1?0:a;o.player!=void 0&&(a!==0&&!r||c)&&(o.player.seekTo(a),o.player.pauseVideo())}}catch(e){}e.find(".tp-videoposter").length==0&&o.bgvideo!==1&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"vimeo":l=$f(e.find("iframe").attr("id"));try{if(o.forcerewind=="on"){var o,l,h,a=n(o.videostartat),f=0,r=a==-1,c=o.bgvideo===1||e.find(".tp-videoposter").length>0,a=a==-1?0:a;(a!==0&&!r||c)&&(l.api("seekTo",a),l.api("pause"))}}catch(e){}e.find(".tp-videoposter").length==0&&o.bgvideo!==1&&punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});break;case"html5":if(i&&o.disablevideoonmobile==1)return!1;var m=o.audio=="html5"?"audio":"video",d=e.find(m),u=d[0];if(punchgs.TweenLite.to(d,.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),o.forcerewind=="on"&&!e.hasClass("videoisplaying"))try{a=n(o.videostartat),u.currentTime=a==-1?0:a}catch(e){}(o.volume=="mute"||t.lastToggleState(e.videomutetoggledby)||s.globalmute===!0)&&(u.muted=!0);break}},isVideoMuted:function(e){switch(n=!1,s=e.data(),s.videotype){case"youtube":try{o=s.player,n=o.isMuted()}catch(e){}break;case"vimeo":try{i=$f(e.find("iframe").attr("id")),s.volume=="mute"&&(n=!0)}catch(e){}break;case"html5":var n,s,o,i,a=s.audio=="html5"?"audio":"video",r=e.find(a),c=r[0];c.muted&&(n=!0);break}return n},muteVideo:function(e){switch(n=e.data(),n.videotype){case"youtube":try{s=n.player,s.mute()}catch(e){}break;case"vimeo":try{o=$f(e.find("iframe").attr("id")),e.data("volume","mute"),o.api("setVolume",0)}catch(e){}break;case"html5":var n,s,o,i=n.audio=="html5"?"audio":"video",a=e.find(i),r=a[0];r.muted=!0;break}},unMuteVideo:function(e,t){if(t.globalmute===!0)return;switch(n=e.data(),n.videotype){case"youtube":try{s=n.player,s.unMute()}catch(e){}break;case"vimeo":try{o=$f(e.find("iframe").attr("id")),e.data("volume","1"),o.api("setVolume",1)}catch(e){}break;case"html5":var n,s,o,i=n.audio=="html5"?"audio":"video",a=e.find(i),r=a[0];r.muted=!1;break}},stopVideo:function(e,t){switch(n=e.data(),t.leaveViewPortBasedStop||(t.lastplayedvideos=[]),t.leaveViewPortBasedStop=!1,n.videotype){case"youtube":try{if(s=n.player,s.getPlayerState()===2||s.getPlayerState()===5)return;s.pauseVideo(),n.youtubepausecalled=!0,setTimeout(function(){n.youtubepausecalled=!1},80)}catch(e){console.log("Issue at YouTube Video Pause:"),console.log(e)}break;case"vimeo":try{o=$f(e.find("iframe").attr("id")),o.api("pause"),n.vimeopausecalled=!0,setTimeout(function(){n.vimeopausecalled=!1},80)}catch(e){console.log("Issue at Vimeo Video Pause:"),console.log(e)}break;case"html5":var n,s,o,r=n.audio=="html5"?"audio":"video",i=e.find(r),a=i[0];i!=void 0&&a!=void 0&&a.pause();break}},playVideo:function(e,o){switch(clearTimeout(e.data("videoplaywait")),a=e.data(),a.videotype){case"youtube":e.find("iframe").length==0?(e.append(e.data("videomarkup")),r(e,o,!0)):a.player.playVideo!=void 0?(c=n(e.data("videostartat")),d=a.player.getCurrentTime(),e.data("nextslideatend-triggered")==1&&(d=-1,e.data("nextslideatend-triggered",0)),c!=-1&&c>d&&a.player.seekTo(c),a.youtubepausecalled!==!0&&a.player.playVideo()):e.data("videoplaywait",setTimeout(function(){a.youtubepausecalled!==!0&&t.playVideo(e,o)},50));break;case"vimeo":e.find("iframe").length==0?(e.append(e.data("videomarkup")),r(e,o,!0)):e.hasClass("rs-apiready")?(h=e.find("iframe").attr("id"),u=$f(h),u.api("play")==void 0?e.data("videoplaywait",setTimeout(function(){a.vimeopausecalled!==!0&&t.playVideo(e,o)},50)):setTimeout(function(){u.api("play");var t=n(e.data("videostartat")),s=e.data("currenttime");e.data("nextslideatend-triggered")==1&&(s=-1,e.data("nextslideatend-triggered",0)),t!=-1&&t>s&&u.api("seekTo",t)},510)):e.data("videoplaywait",setTimeout(function(){a.vimeopausecalled!==!0&&t.playVideo(e,o)},50));break;case"html5":if(i&&e.data("disablevideoonmobile")==1)return!1;var a,c,d,u,h,f=a.audio=="html5"?"audio":"video",m=e.find(f),l=m[0],p=m.parent();p.data("metaloaded")!=1?s(l,"loadedmetadata",function(e){t.resetVideo(e,o),l.play();var s=n(e.data("videostartat")),i=l.currentTime;e.data("nextslideatend-triggered")==1&&(i=-1,e.data("nextslideatend-triggered",0)),s!=-1&&s>i&&(l.currentTime=s)}(e)):(l.play(),c=n(e.data("videostartat")),d=l.currentTime,e.data("nextslideatend-triggered")==1&&(d=-1,e.data("nextslideatend-triggered",0)),c!=-1&&c>d&&(l.currentTime=c));break}},isVideoPlaying:function(e,t){var n=!1;return t.playingvideos!=void 0&&jQuery.each(t.playingvideos,function(t,s){e.attr("id")==s.attr("id")&&(n=!0)}),n},removeMediaFromList:function(e,t){a(e,t)},prepareCoveredVideo:function(e,n,s){var o=s.find("iframe, video"),d=e.split(":")[0],u=e.split(":")[1],r=s.closest(".tp-revslider-slidesli"),i=r.width()/r.height(),a=d/u,c=i/a*100,l=a/i*100;i>a?punchgs.TweenLite.to(o,.001,{height:c+"%",width:"100%",top:-(c-100)/2+"%",left:"0px",position:"absolute"}):punchgs.TweenLite.to(o,.001,{width:l+"%",height:"100%",left:-(l-100)/2+"%",top:"0px",position:"absolute"}),o.hasClass("resizelistener")||(o.addClass("resizelistener"),jQuery(window).resize(function(){clearTimeout(o.data("resizelistener")),o.data("resizelistener",setTimeout(function(){t.prepareCoveredVideo(e,n,s)},30))}))},checkVideoApis:function(e,t,n){if(r=location.protocol==="https:"?"https":"http",(e.data("ytid")!=void 0||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&(t.youtubeapineeded=!0),(e.data("ytid")!=void 0||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("youtube")>0)&&n.addedyt==0&&(t.youtubestarttime=jQuery.now(),n.addedyt=1,i=document.createElement("script"),i.src="https://www.youtube.com/iframe_api",s=document.getElementsByTagName("script")[0],o=!0,jQuery("head").find("*").each(function(){jQuery(this).attr("src")=="https://www.youtube.com/iframe_api"&&(o=!1)}),o&&s.parentNode.insertBefore(i,s)),(e.data("vimeoid")!=void 0||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&(t.vimeoapineeded=!0),(e.data("vimeoid")!=void 0||e.find("iframe").length>0&&e.find("iframe").attr("src").toLowerCase().indexOf("vimeo")>0)&&n.addedvim==0){t.vimeostarttime=jQuery.now(),n.addedvim=1;var i,r,a=document.createElement("script"),s=document.getElementsByTagName("script")[0],o=!0;a.src="https://secure-a.vimeocdn.com/js/froogaloop2.min.js",jQuery("head").find("*").each(function(){jQuery(this).attr("src")=="https://secure-a.vimeocdn.com/js/froogaloop2.min.js"&&(o=!1)}),o&&s.parentNode.insertBefore(a,s)}return n},manageVideoLayer:function(e,o){if(t.compare_version(u).check==="stop")return!1;var m,f,b,_,C,E,F,T,l=e.data(),d=l.videoattributes,A=l.ytid,x=l.vimeoid,S=l.videopreload==="auto"||l.videopreload==="canplay"||l.videopreload==="canplaythrough"||l.videopreload==="progress"?"auto":l.videopreload,O=l.videomp4,k=l.videowebm,M=l.videoogv,j=l.allowfullscreenvideo,y=l.videocontrols,g="http",w=l.videoloop=="loop"?"loop":l.videoloop=="loopandnoslidestop"?"loop":"",v=O!=void 0||k!=void 0?"html5":A!=void 0&&String(A).length>1?"youtube":x!=void 0&&String(x).length>1?"vimeo":"none",p=l.audio=="html5"?"audio":"video",z=v=="html5"&&e.find(p).length==0?"html5":v=="youtube"&&e.find("iframe").length==0?"youtube":v=="vimeo"&&e.find("iframe").length==0?"vimeo":"none",w=l.nextslideatend===!0?"":w;switch(l.videotype=v,z){case"html5":y!="controls"&&(y=""),p="video",l.audio=="html5"&&(p="audio",e.addClass("tp-audio-html5")),m="<"+p+' style="object-fit:cover;background-size:cover;visible:hidden;width:100%; height:100%" class="" '+w+' preload="'+S+'">',S=="auto"&&(o.mediapreload=!0),k!=void 0&&t.get_browser().toLowerCase()=="firefox"&&(m=m+'<source src="'+k+'" type="video/webm" />'),O!=void 0&&(m=m+'<source src="'+O+'" type="video/mp4" />'),M!=void 0&&(m=m+'<source src="'+M+'" type="video/ogg" />'),m=m+"</"+p+">",C="",(j==="true"||j===!0)&&(C='<div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-full-screen">Full-Screen</button></div>'),y=="controls"&&(m=m+('<div class="tp-video-controls"><div class="tp-video-button-wrap"><button type="button" class="tp-video-button tp-vid-play-pause">Play</button></div><div class="tp-video-seek-bar-wrap"><input  type="range" class="tp-seek-bar" value="0"></div><div class="tp-video-button-wrap"><button  type="button" class="tp-video-button tp-vid-mute">Mute</button></div><div class="tp-video-vol-bar-wrap"><input  type="range" class="tp-volume-bar" min="0" max="1" step="0.1" value="1"></div>'+C+"</div>")),e.data("videomarkup",m),e.append(m),(i&&e.data("disablevideoonmobile")==1||t.isIE(8))&&e.find(p).remove(),e.find(p).each(function(){var a,r=this,i=jQuery(this);i.parent().hasClass("html5vid")||i.wrap('<div class="html5vid" style="position:relative;top:0px;left:0px;width:100%;height:100%; overflow:hidden;"></div>'),a=i.parent(),a.data("metaloaded")!=1&&s(r,"loadedmetadata",function(e){h(e,o),t.resetVideo(e,o)}(e))});break;case"youtube":g="https",y=="none"&&(d=d.replace("controls=1","controls=0"),d.toLowerCase().indexOf("controls")==-1&&(d=d+"&controls=0")),(l.videoinline===!0||l.videoinline==="true"||l.videoinline===1)&&(d=d+"&playsinline=1"),E=n(e.data("videostartat")),_=n(e.data("videoendat")),E!=-1&&(d=d+"&start="+E),_!=-1&&(d=d+"&end="+_),b=d.split("origin="+g+"://"),f="",b.length>1?(f=b[0]+"origin="+g+"://",self.location.href.match(/www/gi)&&!b[1].match(/www/gi)&&(f=f+"www."),f=f+b[1]):f=d,F=j==="true"||j===!0?"allowfullscreen":"",e.data("videomarkup",'<iframe style="visible:hidden" type="text/html" src="'+g+"://www.youtube.com/embed/"+A+"?"+f+'" '+F+' width="100%" height="100%" style="width:100%;height:100%"></iframe>');break;case"vimeo":g="https",e.data("videomarkup",'<iframe style="visible:hidden" src="'+g+"://player.vimeo.com/video/"+x+"?autoplay=0&"+d+'" webkitallowfullscreen mozallowfullscreen allowfullscreen width="100%" height="100%" style="100%;height:100%"></iframe>');break}if(T=i&&e.data("noposteronmobile")=="on",l.videoposter!=void 0&&l.videoposter.length>2&&!T)e.find(".tp-videoposter").length==0&&e.append('<div class="tp-videoposter noSwipe" style="cursor:pointer; position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:3;background-image:url('+l.videoposter+'); background-size:cover;background-position:center center;"></div>'),e.find("iframe").length==0&&e.find(".tp-videoposter").click(function(){if(t.playVideo(e,o),i){if(e.data("disablevideoonmobile")==1)return!1;punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut})}});else{if(i&&e.data("disablevideoonmobile")==1)return!1;e.find("iframe").length==0&&(v=="youtube"||v=="vimeo")&&(e.append(e.data("videomarkup")),r(e,o,!1))}e.data("dottedoverlay")!="none"&&e.data("dottedoverlay")!=void 0&&e.find(".tp-dottedoverlay").length!=1&&e.append('<div class="tp-dottedoverlay '+e.data("dottedoverlay")+'"></div>'),e.addClass("HasListener"),e.data("bgvideo")==1&&punchgs.TweenLite.set(e.find("video, iframe"),{autoAlpha:0})}});function n(e){return e==void 0?-1:jQuery.isNumeric(e)?e:e.split(":").length>1?parseInt(e.split(":")[0],0)*60+parseInt(e.split(":")[1],0):e}s=function(e,t,n){e.addEventListener?e.addEventListener(t,n,{capture:!1,passive:!0}):e.attachEvent(t,n,{capture:!1,passive:!0})},o=function(e,t,n){var s={};return s.video=e,s.videotype=t,s.settings=n,s},r=function(e,s,r){var u,m,p,b,h=e.data(),_=e.find("iframe"),v="iframe"+Math.round(Math.random()*1e5+1),g=h.videoloop,w=g!="loopandnoslidestop",g=g=="loop"||g=="loopandnoslidestop";if(e.data("forcecover")==1&&(e.removeClass("fullscreenvideo").addClass("coverscreenvideo"),p=e.data("aspectratio"),p!=void 0&&p.split(":").length>1&&t.prepareCoveredVideo(p,s,e)),e.data("bgvideo")==1&&(p=e.data("aspectratio"),p!=void 0&&p.split(":").length>1&&t.prepareCoveredVideo(p,s,e)),_.attr("id",v),r&&e.data("startvideonow",!0),e.data("videolistenerexist")!==1)switch(h.videotype){case"youtube":m=new YT.Player(v,{events:{onStateChange:function(i){var r,u=e.closest(".tp-simpleresponsive"),p=h.videorate,v=e.data("videostart"),f=d();i.data==YT.PlayerState.PLAYING?(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),e.data("volume")=="mute"||t.lastToggleState(e.data("videomutetoggledby"))||s.globalmute===!0?m.mute():(m.unMute(),m.setVolume(parseInt(e.data("volume"),0)||75)),s.videoplaying=!0,c(e,s),w?s.c.trigger("stoptimer"):s.videoplaying=!1,s.c.trigger("revolution.slide.onvideoplay",o(m,"youtube",e.data())),t.toggleState(h.videotoggledby)):(i.data==0&&g&&(r=n(e.data("videostartat")),r!=-1&&m.seekTo(r),m.playVideo(),t.toggleState(h.videotoggledby)),!f&&(i.data==0||i.data==2)&&e.data("showcoveronpause")=="on"&&e.find(".tp-videoposter").length>0&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),i.data!=-1&&i.data!=3&&(s.videoplaying=!1,s.tonpause=!1,a(e,s),u.trigger("starttimer"),s.c.trigger("revolution.slide.onvideostop",o(m,"youtube",e.data())),(s.currentLayerVideoIsPlaying==void 0||s.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&t.unToggleState(h.videotoggledby)),i.data==0&&e.data("nextslideatend")==!0?(l(),e.data("nextslideatend-triggered",1),s.c.revnext(),a(e,s)):(a(e,s),s.videoplaying=!1,u.trigger("starttimer"),s.c.trigger("revolution.slide.onvideostop",o(m,"youtube",e.data())),(s.currentLayerVideoIsPlaying==void 0||s.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&t.unToggleState(h.videotoggledby)))},onReady:function(t){var s,o=h.videorate,a=e.data("videostart");e.addClass("rs-apiready"),o!=void 0&&t.target.setPlaybackRate(parseFloat(o)),e.find(".tp-videoposter").unbind("click"),e.find(".tp-videoposter").click(function(){i||m.playVideo()}),e.data("startvideonow")&&(h.player.playVideo(),s=n(e.data("videostartat")),s!=-1&&h.player.seekTo(s)),e.data("videolistenerexist",1)}}}),e.data("player",m);break;case"vimeo":for(var y,f=_.attr("src"),j={},O=f,x=/([^&=]+)=([^&]*)/g;y=x.exec(O);)j[decodeURIComponent(y[1])]=decodeURIComponent(y[2]);j.player_id!=void 0?f=f.replace(j.player_id,v):f=f+"&player_id="+v;try{f=f.replace("api=0","api=1")}catch(e){}f=f+"&api=1",_.attr("src",f);var m=e.find("iframe")[0],C=jQuery("#"+v),u=$f(v);u.addEvent("ready",function(){if(e.addClass("rs-apiready"),u.addEvent("play",function(){e.data("nextslidecalled",0),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut}),s.c.trigger("revolution.slide.onvideoplay",o(u,"vimeo",e.data())),s.videoplaying=!0,c(e,s),w?s.c.trigger("stoptimer"):s.videoplaying=!1,e.data("volume")=="mute"||t.lastToggleState(e.data("videomutetoggledby"))||s.globalmute===!0?u.api("setVolume","0"):u.api("setVolume",parseInt(e.data("volume"),0)/100||.75),t.toggleState(h.videotoggledby)}),u.addEvent("playProgress",function(t){var i,o=n(e.data("videoendat"));e.data("currenttime",t.seconds),o!=0&&Math.abs(o-t.seconds)<.3&&o>t.seconds&&e.data("nextslidecalled")!=1&&(g?(u.api("play"),i=n(e.data("videostartat")),i!=-1&&u.api("seekTo",i)):(e.data("nextslideatend")==!0&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),s.c.revnext()),u.api("pause")))}),u.addEvent("finish",function(){a(e,s),s.videoplaying=!1,s.c.trigger("starttimer"),s.c.trigger("revolution.slide.onvideostop",o(u,"vimeo",e.data())),e.data("nextslideatend")==!0&&(e.data("nextslideatend-triggered",1),s.c.revnext()),(s.currentLayerVideoIsPlaying==void 0||s.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&t.unToggleState(h.videotoggledby)}),u.addEvent("pause",function(){e.find(".tp-videoposter").length>0&&e.data("showcoveronpause")=="on"&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find("iframe"),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),s.videoplaying=!1,s.tonpause=!1,a(e,s),s.c.trigger("starttimer"),s.c.trigger("revolution.slide.onvideostop",o(u,"vimeo",e.data())),(s.currentLayerVideoIsPlaying==void 0||s.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&t.unToggleState(h.videotoggledby)}),e.find(".tp-videoposter").unbind("click"),e.find(".tp-videoposter").click(function(){if(!i)return u.api("play"),!1}),e.data("startvideonow")){u.api("play");var r=n(e.data("videostartat"));r!=-1&&u.api("seekTo",r)}e.data("videolistenerexist",1)});break}else switch(b=n(e.data("videostartat")),h.videotype){case"youtube":r&&(h.player.playVideo(),b!=-1&&h.player.seekTo());break;case"vimeo":r&&(u=$f(e.find("iframe").attr("id")),u.api("play"),b!=-1&&u.api("seekTo",b));break}},l=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},d=function(){try{if(window.fullScreen!==void 0)return window.fullScreen;var e=5;return jQuery.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(e=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<e}catch(e){}},h=function(e,r){if(i&&e.data("disablevideoonmobile")==1)return!1;var w,m=e.data(),x=m.audio=="html5"?"audio":"video",b=e.find(x),h=b[0],v=b.parent(),p=m.videoloop,_=p!="loopandnoslidestop",p=p=="loop"||p=="loopandnoslidestop";v.data("metaloaded",1),e.data("bgvideo")==1&&(m.videoloop==="none"||m.videoloop===!1)&&(_=!1),b.attr("control")==void 0&&(e.find(".tp-video-play-button").length==0&&!i&&e.append('<div class="tp-video-play-button"><i class="revicon-right-dir"></i><span class="tp-revstop">&nbsp;</span></div>'),e.find("video, .tp-poster, .tp-video-play-button").click(function(){e.hasClass("videoisplaying")?h.pause():h.play()})),(e.data("forcecover")==1||e.hasClass("fullscreenvideo")||e.data("bgvideo")==1)&&(e.data("forcecover")==1||e.data("bgvideo")==1?(v.addClass("fullcoveredvideo"),w=e.data("aspectratio")||"4:3",t.prepareCoveredVideo(w,r,e)):v.addClass("fullscreenvideo"));var O=e.find(".tp-vid-play-pause")[0],g=e.find(".tp-vid-mute")[0],j=e.find(".tp-vid-full-screen")[0],f=e.find(".tp-seek-bar")[0],y=e.find(".tp-volume-bar")[0];O!=void 0&&s(O,"click",function(){h.paused==!0?h.play():h.pause()}),g!=void 0&&s(g,"click",function(){h.muted==!1?(h.muted=!0,g.innerHTML="Unmute"):(h.muted=!1,g.innerHTML="Mute")}),j!=void 0&&j&&s(j,"click",function(){h.requestFullscreen?h.requestFullscreen():h.mozRequestFullScreen?h.mozRequestFullScreen():h.webkitRequestFullscreen&&h.webkitRequestFullscreen()}),f!=void 0&&(s(f,"change",function(){var e=h.duration*(f.value/100);h.currentTime=e}),s(f,"mousedown",function(){e.addClass("seekbardragged"),h.pause()}),s(f,"mouseup",function(){e.removeClass("seekbardragged"),h.play()})),s(h,"canplaythrough",function(){t.preLoadAudioDone(e,r,"canplaythrough")}),s(h,"canplay",function(){t.preLoadAudioDone(e,r,"canplay")}),s(h,"progress",function(){t.preLoadAudioDone(e,r,"progress")}),s(h,"timeupdate",function(){var s,i=100/h.duration*h.currentTime,t=n(e.data("videoendat")),o=h.currentTime;f!=void 0&&(f.value=i),t!=0&&t!=-1&&Math.abs(t-o)<=.3&&t>o&&e.data("nextslidecalled")!=1&&(p?(h.play(),s=n(e.data("videostartat")),s!=-1&&(h.currentTime=s)):(e.data("nextslideatend")==!0&&(e.data("nextslideatend-triggered",1),e.data("nextslidecalled",1),r.just_called_nextslide_at_htmltimer=!0,r.c.revnext(),setTimeout(function(){r.just_called_nextslide_at_htmltimer=!1},1e3)),h.pause()))}),y!=void 0&&s(y,"change",function(){h.volume=y.value}),s(h,"play",function(){e.data("nextslidecalled",0),n=e.data("volume"),n=n!=void 0&&n!="mute"?parseFloat(n)/100:n,r.globalmute===!0?h.muted=!0:h.muted=!1,n>1&&(n=n/100),n=="mute"?h.muted=!0:n!=void 0&&(h.volume=n),e.addClass("videoisplaying"),s=m.audio=="html5"?"audio":"video",c(e,r),!_||s=="audio"?(r.videoplaying=!1,s!="audio"&&r.c.trigger("starttimer"),r.c.trigger("revolution.slide.onvideostop",o(h,"html5",m))):(r.videoplaying=!0,r.c.trigger("stoptimer"),r.c.trigger("revolution.slide.onvideoplay",o(h,"html5",m))),punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:0,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find(s),.3,{autoAlpha:1,display:"block",ease:punchgs.Power3.easeInOut});var n,s,i=e.find(".tp-vid-play-pause")[0],a=e.find(".tp-vid-mute")[0];i!=void 0&&(i.innerHTML="Pause"),a!=void 0&&h.muted&&(a.innerHTML="Unmute"),t.toggleState(m.videotoggledby)}),s(h,"pause",function(){var n,s=m.audio=="html5"?"audio":"video",i=d();!i&&e.find(".tp-videoposter").length>0&&e.data("showcoveronpause")=="on"&&!e.hasClass("seekbardragged")&&(punchgs.TweenLite.to(e.find(".tp-videoposter"),.3,{autoAlpha:1,force3D:"auto",ease:punchgs.Power3.easeInOut}),punchgs.TweenLite.to(e.find(s),.3,{autoAlpha:0,ease:punchgs.Power3.easeInOut})),e.removeClass("videoisplaying"),r.videoplaying=!1,a(e,r),s!="audio"&&r.c.trigger("starttimer"),r.c.trigger("revolution.slide.onvideostop",o(h,"html5",e.data())),n=e.find(".tp-vid-play-pause")[0],n!=void 0&&(n.innerHTML="Play"),(r.currentLayerVideoIsPlaying==void 0||r.currentLayerVideoIsPlaying.attr("id")==e.attr("id"))&&t.unToggleState(m.videotoggledby)}),s(h,"ended",function(){l(),a(e,r),r.videoplaying=!1,a(e,r),x!="audio"&&r.c.trigger("starttimer"),r.c.trigger("revolution.slide.onvideostop",o(h,"html5",e.data())),e.data("nextslideatend")===!0&&h.currentTime>0&&(!r.just_called_nextslide_at_htmltimer==!0&&(e.data("nextslideatend-triggered",1),r.c.revnext(),r.just_called_nextslide_at_htmltimer=!0),setTimeout(function(){r.just_called_nextslide_at_htmltimer=!1},1500)),e.removeClass("videoisplaying")})},c=function(e,n){n.playingvideos==void 0&&(n.playingvideos=new Array),e.data("stopallvideos")&&n.playingvideos!=void 0&&n.playingvideos.length>0&&(n.lastplayedvideos=jQuery.extend(!0,[],n.playingvideos),jQuery.each(n.playingvideos,function(e,s){t.stopVideo(s,n)})),n.playingvideos.push(e),n.currentLayerVideoIsPlaying=e},a=function(e,t){t.playingvideos!=void 0&&jQuery.inArray(e,t.playingvideos)>=0&&t.playingvideos.splice(jQuery.inArray(e,t.playingvideos),1)}})(jQuery)